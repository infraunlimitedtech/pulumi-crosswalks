config:
  hcloud:token:
    secure: AAABAL43tjxIfpcir62grD1zZ7vK8nBWA14SxPhVKIMw2Le+DToj5tkSU1y/bHW5VjkksXjdz/j+bSVte0/VEN1Q6hkwDgzSN2Ew0FuprphF3JMi1mn8HSiTSH19baIm
  managed-os:main:
    defaults:
      agents:
        k3s:
          config:
            kubelet-arg:
            - node-status-update-frequency=20s
            - system-reserved=cpu=100m,memory=100Mi
      global:
        firewall:
          hetzner:
          - name: hetzner-cka-playground-managed-os
            rules:
            - description: for wireguard interconnect
              port: "51822"
              protocol: udp
              sourceIps:
              - 0.0.0.0/0
              - ::/0
        k3s:
          config:
            token: token
          version: v1.25.4+k3s1
        wireguard:
          cidr: 192.168.70.0/24
      servers:
        k3s:
          config:
            cluster-cidr: 10.38.0.0/16
            cluster-dns: 10.37.0.10
            cluster-domain: hetzner-test.intra.infraunlimited.tech
            disable:
            - metrics-server
            - traefik
            - servicelb
            disable-cloud-controller: true
            kube-apiserver-arg:
            - default-not-ready-toleration-seconds=60
            - default-unreachable-toleration-seconds=60
            kube-controller-manager-arg:
            - node-monitor-grace-period=2m
            kubelet-arg:
            - node-status-update-frequency=20s
            - system-reserved=cpu=1,memory=1Gi
            node-taint:
            - CriticalAddonsOnly=true:NoExecute
            - node-role.kubernetes.io/control-plane:NoSchedule
            service-cidr: 10.37.0.0/16
    infra_stack: spigell/managed-infrastructure/hetzner-cka-playground
    nodes:
      agents:
      - id: k3s-cka-agent01
      - id: k3s-cka-agent02
      servers:
      - id: k3s-cka-server01
        leader: true
